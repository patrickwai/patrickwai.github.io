---
title: fenxi
layout: post
category: Android
---


需要运用的技术
================

服务器端
========

系统架构 （难度系数：高级）
------------

JSON RPC （难度系数：高级）
--------------------------
实现服务器端api。初期适当考虑并发，后期可以用高级的并发框架。disruptor，AKKA等，以降低并发的开发难度。



消息推送(push) 中级
---------------
基于国内网络环境限制，Google Cloud Messaging (GCM) for Android的服务在国内无法使用，而且大多数国产android手机没有集成google服务。所以我们需要选择第三方的推送服务。目前国内评价比较好的推送服务有：腾讯信鸽、百度云推送、个推、极光推送。可选择购买。


客户端
=======

TTS(TEXT TO SPEECH，语音合成) 中级
-----------------------------

用来实现APP内的语音播报功能，可以让用户选择个性化的TTS引擎。如果我们需要统一的声音需要购买TTS语音包。前期我们可以让用户选择自己安装TTS引擎，后期如果需要统一的、个性化的声音，此功能需要集成到APP内，需要购买其他公司的解决方案或者好的开源方案(开源的一般质量比较低)。

*pico   android系统自带的TTS引擎，没有中文语音包，发音质量不好。

*espeak 用户可以选择安装，发音一般。

*VOICE RSS（WEB API） 这个API是需要服务器来合成语音，然后客户端获取音频文件进行播放。用户不可安装。

*科大讯飞   国内做的比较好的一家，有各种中文发音，普通话、粤语和其他方言，发音质量不错。用户可以安装。



语音处理   中级
---------
我们的APP需要实现好友之间的即时消息，可以传送文字、图片、语音，因为不是实时通话，所以不需要非常严格的音频压缩技术。前期阶段我们可以只是用系统支持的录音功能，并传送到服务器，同文字、图片一样，由服务器推送消息通知客户端，然后客户端获取(fetch)消息。如果后期需要，再对语音部分进行优化。


图像压缩  中级
--------
现在手机拍照像素一般比较高，拍摄的照片文件大小比较大，至少都是几个M，需要对照片进行压缩，以便于数据传输。


httpClient  中级
-----------
httpClient用来容易地与服务器进行交互，使用android内部轻量级的httpClient或者用开源的第三方框架apache httpClient。


Json处理  中级
--------


图表呈现  中级
---------
利用html5或其他第三方java库快速实现。


单词呈现  中级
--------
需要建立单词数据库，可以以文件的形式保存，每个级别一个文件。采用合适的算法快速加载。需要考虑节省内存，加载速度


地图呈现  中级
--------
利用地图开放API，在地图上画标记。


动画实现  中级
--------
动画的数量比较少，比较简单


客户端缓存 中级
----------
对于历史数据，保存到客户端，每次更新未缓存的数据。


android框架使用  初级
---------------
没有特别的东西，需要熟练ANDROID框架，熟悉android runtime library。最基本的需要熟练JAVA语言。对于简单的动画可以用JAVA实现。


需要的开发人员
---------------

设计 1名，负责客户端UI设计，各种图标设计。

服务器端开发人员 1名，负责服务器架构实现。

客户端开发人员 1名，负责客户端产品实现。

ANDROID手机 1部，用来开发和测试客户端。

服务器端和客户分别占5成的工作，大概工期 2 - 3个月

--------------------------------------------------
 

系统整体结构树目录
====================

主页
    背单词
        背单词应用各种动作
    运动
        运动应用各种动作
活动
    当前登录用户的活动，包括背单词记录，运动记录，挑战记录，个人发布的信息
朋友
    朋友列表
        发送站内信 - 动作
        个人档案查看 - 动作
            朋友的档案 - 显示
            朋友的活动 - 显示
                多种方式呈现（文字，图表，地图）
            获得的勋章 - 显示
训练
    单词
    运动
挑战
    背单词
        背单词挑战实现
    跑步训练
        跑步挑战实现
教练
    系列的训练
站内信
    收件箱 - 来自其他用户的message列表
        回复信息 - 动作
        删除信息 - 动作
    发送message给其他用户 - 动作
    已发送
        已发送信息列表
            删除 - 动作
设置



APP主要功能模块
===============

登录

活动	记录登录用户的活动

朋友	好友管理，以及查看好友各种信息，搜索、添加、删除好友。 

权限	权限管理，根据用户获得的分数，分配不同权限

信息发布 信息管理，添加、删除。

评论   添加、删除，服务器推送评论
	
站内信管理

***以上模块，工期大概2个月***


训练管理

背单词训练

跑步训练

挑战 每个训练实现挑战模式

***以上模块工期大概 2 个月***


生活伴侣社区 1个月。


各模块服务器需要有对应的功能。


-----------------------------------------------

app详细功能分析  （待完成）
=================


服务器端需要实现的rest API
--------------------------

以类似微信的方式呈现，禁止转发，可以“赞”，可以“评论”

采用restful风格API，所有api返回JSON类型数据。

POST /login
GET status/home_timeline.json    读取当前登录用户和关注好友的最新的timeline
GET status/user_timeline.json    读取关注用户的最新的posts
GET statuses/show/:id   显示post详细信息
POST statuses/destroy/:id   删除一个活动
POST statuses/update    更新登录用户的post，与上一个post比较，相同则返回403 error.
POST statuses/like/:id  比较一条post, by "赞"或者“顶”
GET direct_messages/sent    最近发送的message，默认20条
GET direct_messages/show    显示指定id的message
POST friendships/request    添加好友
POST friendships/destroy    删除好友
GET friends/list            显示好友列表
GET friends/show            显示指定好友
GET friends/lookup          查找用户
POST wordgame/status/update 当用户离开应用界面时，记录进程
GET wordgame/status/get     获取前一次状态以便继续



活动信息
显示每个用户的活动信息


挑战系统


勋章


系统建模
---------
采用mysql数据库，系统建模。

实体模型（client and server shared）

1.  用户(User)
    id
    nick_name
    sex
    age
    hobby
    interest
    simple_resume


2.  *post*
    id
    content
    date_time
    like_mark

3.  comment
    id
    content
    date_time
    user_id


2.  medal 勋章
    id
    name
    description
    image_url

3.  chanllenge 挑战
    id
    usr_id
    with_usr_id
    result_info

